<h1>How To Graffiti Code</h1>
<p style="font-size: 12">
Jeff Dyer, Last update: 07 DEC 2012
</p>

<h2>In This Tutorial</h2>
<p>
In this tutorial you will learn basic skills for using Graffiti Code. If you have experience with
other drawing languages such as PostScript, ActionScript or Processing, then some of what is
described here will be familiar to you. But even so, the syntax and environment are different and
there are other more subtle differences between Graffiti Code and other similar tools, so there is
still much to be learned from this tutorial.
</p>
<p>
Some of the skills you will learn here are:<br>

<ul style="position: relative; left: 15">
<li>Preparing a drawing surface</li>
<li>Creating and positioning shapes</li>
<li>Coloring shapes</li>
<li>Defining new words</li>
<li>Signing in</li>
<li>Archiving code</li>
<li>Sharing code</li>
</ul>
</p>

<p>
But first, a word on the motivation to draw with code.
</p>

<h2>Why Code?</h2>
<p>
When we draw with code, we calculate shapes and colors rather than copy them from what we see. We
draw with code because we want to create using processes and values that can be manipulated by a
machine rather than by our hand. Using a machine in this way allows us to articulate form using
language that fits how we think. The properties that are important to us can be made explicit. For
example, we have language for controlling shape, size and position. We can directly re-size,
re-position, re-shape, and re-color by re-phrasing a description. We can repeat with variation any
and all forms our code describes.
</p>
<p>
Code gives us a notation for recording and archiving our ideas in a way that transcends the here and
now. Code written at one time and place for one purpose can be remixed in other times and places for
other purposes. It is this indirection between idea and implementation that makes drawing with code so
powerful and full of potential meaning. Artist <i>Sol LeWitt</i> relates how this separation of idea
and execution is important to the conceptual artist. He writes:
</p>
<p style="margin: 20">
 <i>"When an artist uses a conceptual form of
art, it means that all of the planning and decisions are made beforehand and the execution is a
perfunctory affair. The idea becomes a machine that makes the art." (Paragraphs on Conceptual
Art, Sol LeWitt, Artforum, September 1967)</i>
</p>
<p>
Whether we are making art or designing a button for a web page, writing code allows us to think
about the essence of the idea without having to think about all its possible realizations. With
code, we capture what is common to a set of values without having to know in advance what is
different about them.
</p>

<p>
Our hope is that with Graffiti Code you will make machines that make your art.
</p>

<h1>Preparing a drawing surface</h1>
<br>
<p>
<b>NOTE</b>: Graffiti Code programs consist of sequences of expressions. The expressions we will be
using in this section are called function applications. You may remember from high school math class
that a function maps a set of values to another set of values. The Graffiti Code functions that
interest us most in this tutorial are ones that return values representing shapes that get drawn on
the digital surface.
</p>
<p>
Graffiti Code provides two functions that affect the drawing surface. They are <b>size</b> and
<b>background</b>. The <b>size</b> function takes two number values that represent the width and height
of the drawing surface in pixels. The <b>background</b> function takes a single value that represents the color of
the background.
</p>
<p> <b>NOTE</b>: Color values can be represented by integer values between <i>0</i> and <i>255</i>,
inclusive, where <i>0</i> represents black and <i>255</i> represents white. Non-grey color values can be computed using one of the functions: <b>rgb</b> or <b>rgba</b>,
to be discussed later.
</p>

<p>
<div id="example-editor-252" name="code"/>
</p>

<p>
This code sets the drawing surface size to <i>100</i> pixels wide by <i>100</i> pixels high, and sets
its color to roughly 50% gray.

<p>
<div id="example-graffito-252"></div>
</p>

<p>
<b>NOTE</b>: The syntax of Graffiti Code is very straightforward. Function applications consist of a
function name followed by its arguments. Top level expressions are terminated with a period, and
expression lists are terminated with another period. Hence, in the example above, each of the
function application expressions for <i>size</i> and <i>background</i> end with a period and the
list of expressions that these two expresions make up is also terminated with a period. A program is
just a list of expressions.
</p>



<h1>Creating and positioning shapes</h1>
<br>
<!--
<p>
<b>Graffiti Code</b> provides functions for constructing and manipulating shape values. Shape constructors include: <br>

<ul style="position: relative; left: 15">
<li><b>curve</b> <i>x0 y0 cx0 cy0 cx1 cy1 x1 y1</i></li>
<li>ellipse</li>
<li>line</li>
<li>path</li>
<li>point</li>
<li>rectangle</li>
<li>text</li>
<li>triangle</li>
</ul>
</p>

<p>
Shape modifiers include: <br>
<ul style="position: relative; left: 15">
<li>translate</li>
<li>color</li>
<li>fill</li>
<li>stroke</li>
<li>rotate</li>
<li>skewx</li>
<li>skewy</li>
<li>scale</li>
<li>font-size</li>
</ul>
</p>
-->

<p>
In this section we will be focusing on the <i>ellipse</i> constructor to demonstrate creating shapes
and the <i>translate</i> modifier to demonstrate positioning shapes.
</p>


<h2>Creating shapes</h2>

<p>
Shapes are created by applying one of the shape constructors to a set of values that are used to
initialize the constructed shape. Below, we use the <i>ellipse</i> constructor applied to numeric
values representing the width and height of the ellipse to create a circular ellipse.
</p>

<p>
<div id="example-editor-254" name="code"/>
</p>

<p>
This code creates an ellipse with the width of <i>80</i> pixels and height of
<i>80</i> pixels, and its center at the origin.
</p>

<p>
<div id="example-graffito-254"></div>
</p>

<p><b>NOTE</b>: Unlike in Processing, the shape contructors of Graffiti Code do not take position
arguments and are instead given a default position of (0, 0). This pattern encourages the reuse of
shape values and reduces the number of constructor arguments to the bare minimum. The resulting
shapes are repositioned using the <i>translate</i> function described in the next section.
</p>

<h2>Positioning shapes</h2>

<p>
<div id="example-editor-258" name="code"/>
</p>

<p>
This code moves the ellipse from its default position with center at the origin to the position
with its center at the position with x of 50 pixels and y of 50 pixels, at the center of our 100 by
100 pixel surface.
</p>

<p>
<div id="example-graffito-258"></div>
</p>

<h1>Coloring shapes</h1>
<br>
<p>
Graffiti Code provides primitive functions for computing colors and applying those colors to shape
values. These functions include: <br>

<ul style="position: relative; left: 15">
<li><b>rgb</b> <i>red green blue</i> - computes an opaque color value</li>
<li><b>rgba</b> <i>red green blue alpha</i> - computes a transparent color value</li>
<li><b>fill</b> <i>color shape</i> - sets fill color</li>
<li><b>stroke</b> <i>color shape</i> - sets stroke color</li>
<li><b>color</b> <i>color shape</i> - sets stroke and fill color</li>
</ul>
</p>

<h2>Coloring shapes</h2>

<p>
We apply the coloring functions to a color and a shape whose color is to be updated. In addition to
the 256 gray values described in the discussion of the <i>background</i> function, we can compute
colors using RGB values using the <b>rgb</b> and <b>rgba</b> functions. The <i>rgb</i> function is
applied to three numeric values between <i>0</i> and <i>255</i> representing the red, green and blue
components of a color. <i>rgba</i> is applied to four values, the first three being the same as
those for <i>rgb</i> and the last one being a numeric value between 0 and 100 representing the
transparency of the computed color where 0 represents complete transparency and 100 represents
complete opacity.
</p>

<p>
<div id="example-editor-262" name="code"/>
</p>

<p>
This code colors our previously created and positioned circle with a transparent black stroke
and an opaque bright green fill. Using the stroke transparency of 0 is an idiom for representing
that we want no stroke color. We use 0 0 0 (black) for simplicity; all completely transparent colors
have make the thing colored invisible.
</p>

<p>
<div id="example-graffito-262"></div>
</p>

<p>
<b>NOTE</b>: Modifier function are designed to take as their last argument the value they modify and
return the modified value. This pattern allows for chaining of modifiers as we see in the example
above.
</p>


<h2>Coloring shapes with transparency</h2>

<p>
We can use transparency to allow shapes to show through shapes positioned in front of them.
</p>

<p>
<div id="example-editor-263" name="code"/>
</p>

<p>
Here we modify the previous piece by setting the background to light grey, and creating three
smaller circles with no stroke and each with one of three different colors all with a transparency
of 30.
</p>

<p>
<div id="example-graffito-263"></div>
</p>

<p>
At this point you're probably thinking to yourself, <i>"Wow! There's a lot of redundancy in this
code. Why can't I just say 'stroke rgba 0 0 0 0' and 'ellipse 50 50' once?"</i> and <i>"These so
called chained expressions are pretty long and gangly. This isn't going to be fun."</i> Not to
worry. We will get of glimpse of how both of these problems are solved in the next section. The
solution involves defining new words that wrap all that redundancy into neat little functional
packages that are configured just the way we want. In addition to providing tidier abstractions for
the things you want to represent, these functions avoid the pitfalls that come with using global
state to manage shared properties.
</p>

<h2>Defining new words</h2>

<p>
Perhaps one of the most interesting features of Graffiti Code is it's use of what computer
scientists call functional programming to describe computation. In Graffiti Code, we can define new
words that map to functions that compute values however we want.
</p>

<p>
Defining functions is simple for simple functions, but can become quite elaborate and hence
powerful. In this section we will just touch on a simple use by rewriting the code in the previous
example to be clearer and more flexible. Other tutorials will reveal the full power of functional
programming for creative coding.
</p>

<p>
Each definition begins with the keyword <b>let</b> and is followed by the word to be defined and
the list of parameters that go with that word. We call this combination of name and parameters the
function's signature. Following the function's signature is a delineating <b>=</b> punctuator
followed by a list of expressions terminated by a period. See what this looks like below.
</p>

<p>
<div id="example-editor-280" name="code"/>
</p>

<p>
Here we have moved the redundant code into the function body and defined parameters that capture
the values that vary within that redundant code.
</p>

<p>
<div id="example-graffito-280"></div>
</p>

<h2>Reusing new words</h2>

<p>
This latest code is easier to read and modify, but its greatest improvement is its ability to be
re-used. Below, we reuse the function <i>colored-circle</i> by defining a new word that draws a
row of colored circles and then another word that draws a grid of colored circles. Each of these
new words can be used in infinitely many other circle drawing ways.
<p>
<div id="example-editor-281" name="code"/>
</p>

<p>
Here you can see that we define the word for <i>colored-circle-row</i> and another word for 
<i>colored-circle-grid</i> that uses <i>colored-circle-row</i>, and then finally our program boils
down the one application of <i>colored-circle-grid</i>.
</p>

<p>
<div id="example-graffito-281"></div>
</p>

<p>
Okay, enough about creating, positioning shapes, and defining and reusing words. There is much more
to learn about such things, but for now we turn to some basic housekeeping items--how to sign in to
Graffiti Code, save code to the archive, and share code with the outside world.
</p>


<h1>Signing in</h1>

<br>
<p>
Signing in to Graffiti Code allows you to save your work to the archive and to share your work as a
Github Gist.
</p>

<p>
Graffiti Code uses Mozilla Persona for identity management. This means we don't store your password,
Mozilla does, and you sign in to Graffiti Code using an email address, which we will only use to
send you important notices about your account, and never display in public or share with third
parties. We use the user name part only of your email address to identify your account in publically
visible content such as the archive.
</p>

<p>
To sign in to Graffiti Code, click the <b>Sign In</b> link on the right side of the Graffiti Code header.
</p>

<p>
<img style="margin-left:10" width="580" src="tutorial-how-to-persona-sign-in.png"/>
</p>

<p>
If you do not already have a Persona account, you will be greeted with the following dialog:
</p>

<img width="600" src="tutorial-how-to-persona-start.png"/>

<p>
This begins a three step process of creating an account and signing you into Graffiti Code.
Persona does a good job guiding you through this simple process. The final step is for you to
confirm your email address by clicking the confirmation link on an email sent to you by Persona.
You know the email has been sent when a dialog such as the one below will be displayed:
</p>

<img style="margin-left:10" width="580" src="tutorial-how-to-persona-confirm.png"/>

<p>
Once you have confirmed your email, Persona will redirect you to Graffiti Code and you will be
automatically signed in. You should see your user name and a <b>Sign Out</b> link displayed in the
Graffiti Code header, which will look something like this:
</p>

<p>
<img style="margin-left:10" width="580" src="tutorial-how-to-persona-sign-out.png"/>
</p>

<p>
To sign out of Graffiti Code, simply click the <i>Sign Out</i> link.
</p>

<h1>Archiving code</h1>

<br>
<p>
Once you've signed into Graffiti Code you can save your work to the archive. All archived pieces are
publically viewable and sharable. But most importantly they are stored for you and others to use as
the starting point for new works of creative coding.
<br>
In the Workspace view, click the Archive button
<img style="position: relative; top: 10; margin:5" src="tutorial-how-to-archive-button.png"></img> 
to save the current code. Code that has not been significantly modified will not be saved.
Significant changes involve changing the compiled meaning of the code. For example, whitespace
changes do <b>not</b> constitute significant modifications.
</p>
<p>
Once the piece has been archived, it will appear at the top of the Archive view until that page is
refreshed, at this point the piece will be sorted along with all of the other archived pieces.
</p>

<p>
Archived pieces can be embedded into HTML using the &lt;object&gt; tag as follows:
</p>

<p style="font-family: Cousine; font-size: 12; font-weight: 700">
&lt;object data="http://www.graffiticode.org/graffiti/120" type="image/svg+xml"/&gt;
</p>

<p>
This example displays piece 120 from the Graffiti Code archive:
</p>
<p>
<object width="200" height="200" data="http://www.graffiticode.org/graffiti/120" type="image/svg+xml"/>
</p>

<h1>Sharing code as a Github Gist</h1>
<br>

<p>
<b>NOTE:</b> Github is a web service for managing code. Github provides lightweight repositories
call Gists for informal code sharing. This is just what we need to share Graffiti Code.
</p>

<p>
Once you've signed into Graffiti Code you can share your code as a Github Gist. Even if you don't
normally use Github, this is a convenient way to make your Graffiti Code available to others,
including for viewing in a browser.
<br>
In the Workspace panel, click the Share button
<img style="position: relative; top: 10; margin:5" src="tutorial-how-to-share-button.png"></img> 
to save the current source and generated object code as a Gist. A link to the Gist will appear below
the piece's thumbnail in the Archive view. When you follow that link you will see two files in the
Gist, one for the Graffiti Code source, and one for the object code (e.g. SVG). The Gist view will
provide links for accessing that code with Git. Perhaps the simplest workflow from here is to click
the link to the <b>raw</b> code of the <b>obj</b> file, select all, and copy the code verbatim into
the HTML of a web page or blog.
</p>

<p>
<b>NOTE</b>: Ignore the Gist <i>show embed</i> link. It makes the bold assumption that the code is
JavaScript. Since Graffiti Code is not generating JavaScript, nothing good will come from you using
the offered markup. If you want to link, as opposed to inline, the generated code, use an
 &lt;object&gt; tag as described in the previous section.
</p>

<p>
There is one Gist per archived piece, so if the current code has already been archived and saved as
a Gist, the Share button will have no effect.
</p>


<link rel="stylesheet" href="codemirror.css">
<script src="codemirror.js"></script>
<script src="mode-graffiti.js"></script>

<script src="tutorial-starting.js"></script>
