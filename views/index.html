<html>
<head>
  <script src="graffiticode.js"></script>
  <script src="codemirror.js"></script>
  <script src="simple-hint.js"></script>
  <link rel="stylesheet" href="codemirror.css">
  <link rel="stylesheet" href="simple-hint.css">
  <script src="parse.js"></script>
  <script src="mode-graffiti.js"></script>
  <script src="mode-xml.js"></script>
  <script src="mode-javascript.js"></script>
  <script src="jquery.js"></script>
  <script src="d3.v2.js"></script>
  <style>
    .CodeMirror {border-top: 1px solid #ddd; border-bottom: 1px solid #ddd;}
    span.cm-meta {color: #a0b !important;}
    span.cm-error { background-color: black; opacity: 0.4;}
    span.cm-error.cm-string { background-color: red; }
    span.cm-error.cm-tag { background-color: #2b2; }
  </style>
  <link rel="stylesheet" href="docs.css">
  <title><%=title%></title>
</head>
<body>
  <h3>Code</h3>
  <div id="edit-view" name="code"></div>
  <br/>
  <h3>AST</h3>
  <div id="ast-view" name="code"></div>
  <br/>
  <h3>Graffiti Text</h3>
  <div id="text-view" name="code"></div>
  <br/>
  <h3>Graffiti Picture</h3>
  <script>

var myCodeMirror = CodeMirror(document.querySelector("#edit-view"), {
    value: "",
    mode:  "graffiti",
    lineWrapping: "true",
    lineNumbers: "true",
    onCursorActivity: function (editor) {
        CodeMirror.handleCursorEvent(editor)
        return false
    }
})

var astCodeMirror = CodeMirror(document.querySelector("#ast-view"), {
    value: "",
    mode: {name: "javascript", json: true},
    lineWrapping: "true",
    lineNumbers: "true",
})

var textCodeMirror = CodeMirror(document.querySelector("#text-view"), {
    value: "",
//    mode: {name: "xml", alignCDATA: true},
    mode: {name: "javascript", json: true},
    lineWrapping: "true",
    lineNumbers: "true",
})

$(document).ready(
  function() {
//    GraffitiCode.ui.updateText()
})

  </script>
</body>
</html>
